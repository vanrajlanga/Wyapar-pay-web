"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[278],{8278:function(e,t,r){r.d(t,{Header:function(){return m}});var s=r(7437),n=r(2265),a=r(9376),o=r(3145),i=r(9775),c=r(4766),l=r(7414),h=r(2369),u=r(6840),d=r(3976),f=r(9765);function m(){let[e,t]=(0,n.useState)(!1),r=(0,a.useRouter)(),m=(0,a.usePathname)(),{isAuthenticated:g}=(0,f.a)(),p=[{name:"Recharge & Bills",href:"#recharge"},{name:"Financial Services",href:"#financial"},{name:"Offers",href:"#offers"},{name:"Refer & Earn",href:"#refer"}],k=(e,s)=>{s.startsWith("#")&&(e.preventDefault(),m!==d.Z6.HOME?(r.push("".concat(d.Z6.HOME).concat(s)),setTimeout(()=>{x(s)},300)):x(s)),t(!1)},x=e=>{let t=document.querySelector(e);if(t){let e=t.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:e,behavior:"smooth"})}};return(0,s.jsxs)("header",{className:"sticky top-0 z-50 w-full border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/95",style:{paddingTop:"env(safe-area-inset-top)"},children:[(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>r.push(d.Z6.HOME),children:[(0,s.jsx)("div",{className:"relative h-8 w-auto flex items-center",children:(0,s.jsx)(o.default,{src:"/logo.png",alt:"WyaparPay Logo",width:140,height:40,className:"h-8 w-auto object-contain max-w-[140px]",priority:!0,unoptimized:!0,onError:e=>{e.currentTarget.src="/wyaparpay-icon.png"}})}),(0,s.jsx)("span",{className:"text-xl font-bold text-gray-900 hidden sm:block",children:"WyaparPay"})]}),(0,s.jsx)("nav",{className:"hidden md:flex items-center gap-6",children:p.map(e=>(0,s.jsx)("a",{href:e.href,onClick:t=>k(t,e.href),className:"text-gray-700 hover:text-orange-600 transition-colors text-sm font-medium cursor-pointer",children:e.name},e.name))}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("button",{className:"relative hidden sm:flex p-2 text-gray-700 hover:text-orange-600 transition-colors",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs flex items-center justify-center",children:"3"})]}),(0,s.jsx)("button",{className:"hidden sm:flex p-2 text-gray-700 hover:text-orange-600 transition-colors",children:(0,s.jsx)(l.Z,{className:"h-5 w-5"})}),g?(0,s.jsx)(i.zx,{onClick:()=>r.push(d.Z6.DASHBOARD),className:"hidden sm:flex bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white shadow-md font-semibold",children:"Dashboard"}):(0,s.jsxs)(i.zx,{variant:"outline",onClick:()=>r.push(d.Z6.LOGIN),className:"hidden sm:flex",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Sign In"]}),(0,s.jsx)("button",{className:"md:hidden p-2 text-gray-700 hover:text-orange-600 transition-colors",onClick:()=>t(!e),children:(0,s.jsx)(u.Z,{className:"h-6 w-6"})})]})]})}),e&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 md:hidden",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:()=>t(!1),role:"button","aria-label":"Close menu"}),(0,s.jsx)("div",{className:"fixed inset-y-0 right-0 w-3/4 max-w-sm bg-white shadow-lg p-6 overflow-y-auto",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))",paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))",paddingRight:"max(1.5rem, env(safe-area-inset-right))"},children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 mt-8",children:[p.map(e=>(0,s.jsx)("a",{href:e.href,onClick:t=>k(t,e.href),className:"text-lg py-3 px-4 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors min-h-[44px] flex items-center cursor-pointer",children:e.name},e.name)),(0,s.jsxs)(i.zx,{onClick:()=>{r.push(d.Z6.LOGIN),t(!1)},className:"mt-4 w-full",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Sign In"]})]})})]})]})}},9765:function(e,t,r){r.d(t,{AuthProvider:function(){return d},a:function(){return f}});var s=r(7437),n=r(2265),a=r(3976),o=r(7571),i=r(4569);class c{async register(e){return await o.E.post(a.Pn.AUTH.REGISTER,e)}async login(e){var t,r;let s=await o.E.post(a.Pn.AUTH.LOGIN,e);return(null===(t=s.tokens)||void 0===t?void 0:t.accessToken)&&(null===(r=s.tokens)||void 0===r?void 0:r.refreshToken)&&(i.t.saveTokens(s.tokens.accessToken,s.tokens.refreshToken),i.t.saveUser(s.user)),s}async requestOtp(e){return o.E.post(a.Pn.AUTH.REQUEST_OTP,e)}async loginWithOtp(e){var t,r;let s=await o.E.post(a.Pn.AUTH.OTP_LOGIN,e);return(null===(t=s.tokens)||void 0===t?void 0:t.accessToken)&&(null===(r=s.tokens)||void 0===r?void 0:r.refreshToken)&&(i.t.saveTokens(s.tokens.accessToken,s.tokens.refreshToken),i.t.saveUser(s.user)),s}async verifyEmail(e){return o.E.post(a.Pn.AUTH.VERIFY_EMAIL,{token:e})}async resendVerification(e){return o.E.post(a.Pn.AUTH.RESEND_VERIFICATION,{userId:e})}async logout(){try{await o.E.post(a.Pn.AUTH.LOGOUT,{})}finally{i.t.clearAuth()}}async refreshToken(){var e,t;let r=i.t.getRefreshToken();if(!r)throw Error("No refresh token available");let s=await o.E.post(a.Pn.AUTH.REFRESH_TOKEN,{refreshToken:r});return(null===(e=s.tokens)||void 0===e?void 0:e.accessToken)&&(null===(t=s.tokens)||void 0===t?void 0:t.refreshToken)&&i.t.saveTokens(s.tokens.accessToken,s.tokens.refreshToken),s}isAuthenticated(){return!!i.t.getAccessToken()}getCurrentUser(){return i.t.getUser()}}let l=new c;var h=r(7903);let u=(0,n.createContext)(void 0);function d(e){let{children:t}=e,[r,a]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(()=>{try{let e=i.t.getUser(),t=i.t.getAccessToken();e&&t&&a(e)}catch(e){h.k.error("Error initializing auth",e)}finally{c(!1)}})()},[]);let d=async e=>{try{let t=await l.login(e);a(t.user),h.k.info("Login successful")}catch(e){throw h.k.error("Login failed",e),e}},f=async e=>{try{await l.register(e),h.k.info("Registration successful")}catch(e){throw h.k.error("Registration failed",e),e}},m=async e=>{try{await l.requestOtp(e),h.k.info("OTP requested successfully")}catch(e){throw h.k.error("OTP request failed",e),e}},g=async e=>{try{let t=await l.loginWithOtp(e);a(t.user),h.k.info("OTP login successful")}catch(e){throw h.k.error("OTP login failed",e),e}},p=async e=>{try{await l.verifyEmail(e),h.k.info("Email verified successfully")}catch(e){throw h.k.error("Email verification failed",e),e}},k=async e=>{try{await l.resendVerification(e),h.k.info("Verification email resent")}catch(e){throw h.k.error("Resend verification failed",e),e}},x=async()=>{try{await l.logout(),a(null),h.k.info("Logout successful")}catch(e){h.k.error("Logout failed",e),a(null)}},v=async()=>{try{let e=i.t.getUser();a(e)}catch(e){h.k.error("Error refreshing user",e)}};return(0,s.jsx)(u.Provider,{value:{user:r,isAuthenticated:!!r,isLoading:o,login:d,register:f,requestOtp:m,loginWithOtp:g,verifyEmail:p,resendVerification:k,logout:x,refreshUser:v},children:t})}function f(){let e=(0,n.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7571:function(e,t,r){r.d(t,{E:function(){return c}});var s=r(3976),n=r(7903),a=r(4569);class o extends Error{constructor(e,t,r){super(e),this.statusCode=t,this.response=r,this.name="ApiError"}}class i{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new AbortController,i=setTimeout(()=>r.abort(),this.timeout),c="".concat(this.baseUrl).concat(e),l=a.t.getAccessToken();n.k.logApiCall(t.method||"GET",e,t.body?JSON.parse(t.body):void 0);try{let a=await fetch(c,{...t,signal:r.signal,headers:{"Content-Type":"application/json",...l?{Authorization:"Bearer ".concat(l)}:{},...t.headers}});clearTimeout(i);let h=await a.json();if(n.k.logApiResponse(e,a.status,h),!a.ok)throw new o(h.message||s.RZ.SOMETHING_WENT_WRONG,a.status,h);return h}catch(t){if(clearTimeout(i),t instanceof o)throw t;if(t instanceof Error&&"AbortError"===t.name)throw n.k.error("API request timeout",t,{endpoint:e}),new o("Request timeout. Please try again.");throw n.k.error("API network error",t,{endpoint:e}),new o(s.RZ.NETWORK_ERROR)}}async get(e,t){return this.request(e,{method:"GET",headers:t?{Authorization:"Bearer ".concat(t)}:{}})}async post(e,t,r){return this.request(e,{method:"POST",body:JSON.stringify(t),headers:r?{Authorization:"Bearer ".concat(r)}:{}})}async put(e,t,r){return this.request(e,{method:"PUT",body:JSON.stringify(t),headers:r?{Authorization:"Bearer ".concat(r)}:{}})}async delete(e,t){return this.request(e,{method:"DELETE",headers:t?{Authorization:"Bearer ".concat(t)}:{}})}async patch(e,t,r){return this.request(e,{method:"PATCH",body:JSON.stringify(t),headers:r?{Authorization:"Bearer ".concat(r)}:{}})}constructor(){this.baseUrl=s.Hz.BASE_URL,this.timeout=s.Hz.TIMEOUT}}let c=new i},7903:function(e,t,r){r.d(t,{k:function(){return n}});class s{log(e,t,r){if(!this.isDevelopment&&"debug"===e)return;let s=new Date().toISOString(),n="[".concat(s,"] [").concat(e.toUpperCase(),"]");switch(e){case"info":console.log(n,t,r||"");break;case"warn":console.warn(n,t,r||"");break;case"error":console.error(n,t,r||"");break;case"debug":console.debug(n,t,r||"")}}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t,r){this.log("error",e,{error:t,...r})}debug(e,t){this.log("debug",e,t)}logApiCall(e,t,r){this.debug("API ".concat(e," ").concat(t),r)}logApiResponse(e,t,r){this.debug("API Response ".concat(e),{status:t,data:r})}constructor(){this.isDevelopment=!1}}let n=new s},4569:function(e,t,r){r.d(t,{t:function(){return a}});var s=r(3976);class n{setItem(e,t){if(this.isClient)try{let r=JSON.stringify(t);localStorage.setItem(e,r)}catch(e){}}getItem(e){if(!this.isClient)return null;try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return null}}removeItem(e){if(this.isClient)try{localStorage.removeItem(e)}catch(e){}}clear(){if(this.isClient)try{localStorage.clear()}catch(e){}}saveTokens(e,t){this.setItem(s.I.ACCESS_TOKEN,e),this.setItem(s.I.REFRESH_TOKEN,t)}getAccessToken(){return this.getItem(s.I.ACCESS_TOKEN)}getRefreshToken(){return this.getItem(s.I.REFRESH_TOKEN)}clearTokens(){this.removeItem(s.I.ACCESS_TOKEN),this.removeItem(s.I.REFRESH_TOKEN)}saveUser(e){this.setItem(s.I.USER_DATA,e)}getUser(){return this.getItem(s.I.USER_DATA)}clearUser(){this.removeItem(s.I.USER_DATA)}clearAuth(){this.clearTokens(),this.clearUser()}constructor(){this.isClient=!0}}let a=new n}}]);